import{a as L,b as h,c as Y}from"./chunk-LK6BKSG7.js";import{a as R,b as M,c as K,d as re}from"./chunk-THCKBNDS.js";import{a as V}from"./chunk-LB3JJSQX.js";import{a as I,b as X,c as J}from"./chunk-UWH2UMXI.js";import"./chunk-XAZLOLJU.js";import{b as G,d as P,e as Z,f as $,g as v,h as ee,i as pe,j as te,k as oe,m as z,n as U}from"./chunk-FGCJRMB2.js";import{$ as D,Ca as N,Da as f,Ea as q,H as T,I as ne,Ia as j,Ja as W,Ka as Q,L as E,Ma as a,Na as x,O as m,P as se,Qa as u,V as A,W as B,Xa as O,cb as H,d,fb as p,ga as c,h as b,nb as ue,pa as F,qa as S,rb as ie,wa as s,xa as n,ya as y}from"./chunk-7QUWYAMQ.js";var fe=(()=>{class i{constructor(){this.onAddEvent=new D}onAddToggle(){this.onAddEvent.emit()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-list-header"]],outputs:{onAddEvent:"onAddEvent"},standalone:!0,features:[u],decls:12,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-primary-foreground",3,"click"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Doctores - Listado"),n(),s(4,"div",3)(5,"a",4),a(6,"Lista"),n(),s(7,"span"),a(8," - Doctores"),n()()(),s(9,"div",5)(10,"button",6),f("click",function(){return t.onAddToggle()}),a(11," Agregar Doctor "),n()()())},dependencies:[p],encapsulation:2,changeDetection:0})}}return i})();var Oe=["doctor-item",""],he=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["","doctor-item",""]],inputs:{doctor:"doctor"},standalone:!0,features:[u],attrs:Oe,decls:12,vars:3,consts:[[1,"py-3","pl-3","text-start"],[1,"pr-1"],[1,"text-sm","text-muted-foreground"],[1,"py-3","pl-3","text-right"]],template:function(e,t){e&1&&(s(0,"td",0)(1,"div",1)(2,"span",2),a(3),n()()(),s(4,"td",0)(5,"div",1)(6,"span",2),a(7),n()()(),s(8,"td",3)(9,"div",1)(10,"span",2),a(11),n()()()),e&2&&(c(3),x(t.doctor.code),c(4),x(t.doctor.user.email),c(4),x(t.doctor.user.fullName))},dependencies:[p],encapsulation:2,changeDetection:0})}}return i})();function He(i,k){if(i&1){let o=N();s(0,"tr",10),f("click",function(){let t=A(o).$implicit,r=q();return B(r.onSelectTable(t))}),n()}if(i&2){let o=k.$implicit;S("doctor",o)}}var ge=(()=>{class i{constructor(){this.onSelectItem=new D}onSelectTable(o){this.onSelectItem.emit(o)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-doctor-list-items"]],inputs:{doctors:"doctors"},outputs:{onSelectItem:"onSelectItem"},standalone:!0,features:[u],decls:17,vars:1,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"mb-4","flex","items-center","justify-between"],[1,"flex-col","items-center"],[1,"text-xs","text-foreground"],[1,"relative","overflow-x-auto"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground"],[1,"py-3","text-left"],[1,"py-3","text-right"],["doctor-item","","class","border-b border-dashed border-border hover:bg-card",3,"doctor","click",4,"ngFor","ngForOf"],["doctor-item","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"click","doctor"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),a(4,"Lista de Doctores"),n()()(),s(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th",7),a(10,"Codigo"),n(),s(11,"th",7),a(12,"Email"),n(),s(13,"th",8),a(14,"Nombre"),n()()(),s(15,"tbody"),F(16,He,1,1,"tr",9),n()()()()),e&2&&(c(16),S("ngForOf",t.doctors))},dependencies:[p,H,he],encapsulation:2,changeDetection:0})}}return i})();var Se=(()=>{class i{constructor(){this.doctorForm=new $({id:new v,code:new v,fullName:new v,user_id:new v,email:new v})}ngOnInit(){this.doctorForm.patchValue({id:this.doctor.id,code:this.doctor.code,fullName:this.doctor.user.fullName,user_id:this.doctor.user.id,email:this.doctor.user.email})}close(){this.detailListener.close()}onSubmit(){this.detailListener.submit(this.doctorForm)}onDelete(){this.detailListener.delete(this.doctor.id)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-doctor-detail"]],inputs:{doctor:"doctor",detailListener:"detailListener"},standalone:!0,features:[u],decls:26,vars:2,consts:[[1,"flex","w-screen","md:w-96","bg-background","h-full","overflow-auto","gap-2","px-3","flex-col","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted",3,"ngSubmit","formGroup"],[1,"sticky","top-0","flex","flex-col","bg-background"],[1,"flex","relative","flex-row","items-center","gap-2","py-3","justify-start"],[1,"text-lg","text-foreground"],[1,"absolute","cursor-pointer","right-0","inline-flex","w-fit","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-fit",3,"click"],[1,"border-dashed","border-border"],[1,"flex","py-2","flex-col"],[1,"px-2","flex-col","flex"],[1,"text-xs","text-muted-foreground"],["type","text","formControlName","fullName","name","fullName","placeholder","google"],["type","text","formControlName","email","name","email","placeholder","google"],[1,"flex","py-2","flex-col","gap-2"],["type","submit",1,"bg-primary","text-white","rounded-md","p-2"],["type","button",1,"bg-red-500","text-white","rounded-md","p-2",3,"click"]],template:function(e,t){e&1&&(s(0,"form",0),f("ngSubmit",function(){return t.onSubmit()}),s(1,"div",1)(2,"div",2)(3,"span",3),a(4),n(),s(5,"button",4),f("click",function(){return t.close()}),a(6," X "),n()(),y(7,"hr",5),n(),s(8,"div",6)(9,"div",7)(10,"span",8),a(11,"Nombre"),n(),y(12,"input",9),n()(),y(13,"hr",5),s(14,"div",6)(15,"div",7)(16,"span",8),a(17,"Email"),n(),y(18,"input",10),n()(),y(19,"hr",5),s(20,"div",11)(21,"button",12),a(22," Guardar Cambios "),n(),y(23,"hr"),s(24,"button",13),f("click",function(){return t.onDelete()}),a(25," Eliminar "),n()()()),e&2&&(S("formGroup",t.doctorForm),c(4),x("Doctor :"+t.doctor.user.fullName))},dependencies:[p,z,ee,G,P,Z,U,te,oe],encapsulation:2,changeDetection:0})}}return i})();var ve=(()=>{class i{constructor(){this.graphqlEndpoint=L.api_url}getAll(){return d(this,arguments,function*(o={}){try{let t=new h().setRootType("query").openBlock("doctors").addField("id").addField("code").openBlock("user").addField("id").addField("fullName").addField("email").openBlock("roles").addField("id").addField("name").closeBlock().closeBlock().closeBlock().close().build(),{doctors:r,errors:l}=yield h.fetchQuery(t,this.graphqlEndpoint);return l?{isSuccess:!1,error:l[0].message}:{isSuccess:!0,value:r}}catch(e){return{isSuccess:!1,error:e.message}}})}getById(t){return d(this,arguments,function*(o,e={}){try{let l=new h().addFieldWithArgs("consultingRoom",{id:o}).openBlock("consultingRoom").addFieldsFromParams(e).closeBlock().close().build(),{consultingRoom:g,errors:w}=yield h.fetchQuery(l,this.graphqlEndpoint);return w?{isSuccess:!1,error:w[0].message}:{isSuccess:!0,value:g}}catch(r){return{isSuccess:!1,error:r.message}}})}create(o,e){return d(this,null,function*(){let t=new h;t.addFunctionWithArgs("createDoctor",{input:"$input"}).addField("id").addField("code").openBlock("user").addField("fullName").addField("email").closeBlock().closeBlock();let r=t.build();console.log("Generated Mutation:",r);let g={query:`mutation CreateDoctor($input: DoctorInput!) { ${r} }`,variables:{input:o}};try{let _=yield(yield fetch(L.api_url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)})).json();return _.errors?(console.error("GraphQL Error:",_.errors[0].message),{isSuccess:!1,error:_.errors[0].message}):(console.log("Mutation Success:",_.data.createDoctor),{isSuccess:!0,value:_.data.createDoctor})}catch(w){return console.error("Error:",w.message),{isSuccess:!1,error:w.message}}})}update(o,e,t){return d(this,null,function*(){try{let l=new h().setRootType("mutation").addFieldWithArgs("updateDoctor",{id:o,input:e}).addField("id").addField("code").openBlock("user").addField("id").addField("fullName").addField("email").closeBlock().close().close().build(),g=yield h.fetchQuery(l,this.graphqlEndpoint);return g.errors?{isSuccess:!1,error:g.errors[0].message}:{isSuccess:!0,value:g.updateDoctor}}catch(r){return{isSuccess:!1,error:r.message}}})}delete(o){return d(this,null,function*(){try{let t=new h().setRootType("mutation").addDeleteMutation("deleteDoctor",{id:o}).build(),r=yield h.fetchQuery(t,this.graphqlEndpoint);return r.errors?{isSuccess:!1,error:r.errors[0].message}:{isSuccess:!0,value:r.deleteConsultingRoom}}catch(e){return{isSuccess:!1,error:e.message}}})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Ve(i,k){}var ye=(()=>{class i{constructor(){this.doctors=[],this.detailListener={close:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},cancel:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},submit:o=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.showAlert({description:"Estas seguro de realizar la modificacion?"}).subscribe(e=>{let{id:t,code:r,fullName:l,user_id:g,email:w}=o.value,_={code:r,user:{id:g,fullName:l,email:w}};this.updateDoctor(t,_)})},delete:o=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.showAlert({description:"Estas seguro de realizar la eliminacion?"}).subscribe(e=>{})}},this.onShowItem=!1,this.modalService=E(J),this.dialogService=E(V),this.doctorService=E(ve),this.cdr=E(O)}ngOnInit(){this.loadItems()}ngAfterViewInit(){}onItemSelected(o){let e=this.dcWrapper.viewContainerRef;e.clear();let t=e.createComponent(Se);t.instance.doctor=o,t.instance.detailListener=this.detailListener,this.onShowItem=!0}onAddDoctor(){let o={component:M,data:{title:"Usuario",description:"Especificaciones necesarias del usuario a agregar"},dynamicFields:[{component:R,data:{placeholder:"usuario@sistema.com",title:"email",id:"email"},fieldFormControl:new v("")},{component:R,data:{placeholder:"password",title:"Password",id:"password"},fieldFormControl:new v("")},{component:R,data:{title:"Nombre",placeholder:"Agregar nombre",id:"fullName"},fieldFormControl:new v("")}]},e={component:M,data:{title:"Doctor",description:"Se necesita especificar los detalles del doctor a agregar"},dynamicFields:[{component:R,data:{placeholder:"0000X0000",title:"Codigo",id:"code"},fieldFormControl:new v("")}]};this.modalService.open(K,{title:"Agregar Doctor",size:"sm",forms:[o,e],data:{},icon:"assets/icons/heroicons/outline/plus.svg",actions:[{action:X.Create,title:"Agregar"}]}).subscribe(t=>{let{email:r,password:l,fullName:g,code:w}=Y(t),_={code:w,user:{fullName:g,email:r,password:l}};this.createDoctor(_)})}loadItems(){return d(this,null,function*(){let o=new b;this.dialogService.showLoading({description:"Cargando",listener:o});let e=yield this.doctorService.getAll();if(o.next(0),!e.isSuccess){this.dialogService.showError({description:e.error});return}this.doctors=e.value,this.cdr.detectChanges()})}createDoctor(o){return d(this,null,function*(){let e=new b;this.dialogService.showLoading({description:"Cargando",listener:e});let t=yield this.doctorService.create(o);if(e.next(0),!t.isSuccess){this.dialogService.showError({description:t.error});return}this.doctors=[...this.doctors,t.value],this.cdr.detectChanges(),this.dialogService.ShowSuccess({description:"Doctor creado exitosamente"})})}updateDoctor(o,e){return d(this,null,function*(){let t=new b;this.dialogService.showLoading({description:"Cargando",listener:t});let r=yield this.doctorService.update(o,e);if(t.next(0),!r.isSuccess){this.dialogService.showError({description:r.error});return}this.doctors=this.doctors.map(l=>l.id===o?r.value:l),this.dialogService.ShowSuccess({description:"Consultorio actualizado con \xE9xito"}),this.cdr.detectChanges()})}deleteDoctor(o){return d(this,null,function*(){let e=new b;this.dialogService.showLoading({description:"Cargando",listener:e});let t=yield this.doctorService.delete(o);if(e.next(0),!t.isSuccess){this.dialogService.showError({description:t.error});return}this.doctors=this.doctors.filter(r=>r.id!==o),this.dialogService.ShowSuccess({description:"Doctor eliminado con \xE9xito"}),this.cdr.detectChanges()})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-list"]],viewQuery:function(e,t){if(e&1&&j(I,5),e&2){let r;W(r=Q())&&(t.dcWrapper=r.first)}},standalone:!0,features:[u],decls:5,vars:3,consts:[[3,"classList"],[3,"onAddEvent"],[3,"onSelectItem","doctors"],["dcWrapper",""]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",0)(2,"app-list-header",1),f("onAddEvent",function(){return t.onAddDoctor()}),n(),s(3,"app-doctor-list-items",2),f("onSelectItem",function(l){return t.onItemSelected(l)}),n()(),F(4,Ve,0,0,"ng-template",3),n()),e&2&&(S("classList",t.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),c(),S("classList",t.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"),c(2),S("doctors",t.doctors))},dependencies:[p,fe,ge,I],encapsulation:2,changeDetection:0})}}return i})();var xe=(()=>{class i{constructor(){this.onAddEvent=new D}onAddToggle(){this.onAddEvent.emit()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-schedules-header"]],outputs:{onAddEvent:"onAddEvent"},standalone:!0,features:[u],decls:12,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-primary-foreground",3,"click"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Horarios - Listado"),n(),s(4,"div",3)(5,"a",4),a(6,"Lista"),n(),s(7,"span"),a(8," - Horarios"),n()()(),s(9,"div",5)(10,"button",6),f("click",function(){return t.onAddToggle()}),a(11," Agregar Horario "),n()()())},dependencies:[p],encapsulation:2,changeDetection:0})}}return i})();var Ge=["schedule-item",""],Ce=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["","schedule-item",""]],inputs:{schedule:"schedule"},standalone:!0,features:[u],attrs:Ge,decls:16,vars:4,consts:[[1,"py-3","pl-3","text-start"],[1,"pr-1"],[1,"text-sm","text-muted-foreground"],[1,"py-3","pl-3","text-end"]],template:function(e,t){e&1&&(s(0,"td",0)(1,"div",1)(2,"span",2),a(3),n()()(),s(4,"td",0)(5,"div",1)(6,"span",2),a(7),n()()(),s(8,"td",0)(9,"div",1)(10,"span",2),a(11),n()()(),s(12,"td",3)(13,"div",1)(14,"span",2),a(15),n()()()),e&2&&(c(3),x(t.schedule.startTime),c(4),x(t.schedule.doctor==null||t.schedule.doctor.user==null?null:t.schedule.doctor.user.fullName),c(4),x(t.schedule.consultingRoom==null?null:t.schedule.consultingRoom.roomName),c(4),x(t.schedule.speciality==null?null:t.schedule.speciality.name))},dependencies:[p],encapsulation:2,changeDetection:0})}}return i})();function Pe(i,k){if(i&1){let o=N();s(0,"tr",10),f("click",function(){let t=A(o).$implicit,r=q();return B(r.onSelectTable(t))}),n()}if(i&2){let o=k.$implicit;S("schedule",o)}}var we=(()=>{class i{constructor(){this.onItemSelected=new D}onSelectTable(o){this.onItemSelected.emit(o)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-schedule-list-items"]],inputs:{schedules:"schedules"},outputs:{onItemSelected:"onItemSelected"},standalone:!0,features:[u],decls:19,vars:1,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"mb-4","flex","items-center","justify-between"],[1,"flex-col","items-center"],[1,"text-xs","text-foreground"],[1,"relative","overflow-x-auto"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground"],[1,"py-3","text-left"],[1,"py-3","text-right"],["schedule-item","","class","border-b border-dashed border-border hover:bg-card",3,"schedule","click",4,"ngFor","ngForOf"],["schedule-item","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"click","schedule"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),a(4,"Lista de Horarios"),n()()(),s(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th",7),a(10,"Horarios"),n(),s(11,"th",7),a(12,"Usuario"),n(),s(13,"th",7),a(14,"Consultorio"),n(),s(15,"th",8),a(16,"Especialidad"),n()()(),s(17,"tbody"),F(18,Pe,1,1,"tr",9),n()()()()),e&2&&(c(18),S("ngForOf",t.schedules))},dependencies:[p,H,Ce],encapsulation:2,changeDetection:0})}}return i})();var be=(()=>{class i{close(){this.detailListener.close()}onSubmit(){}onDelete(){this.detailListener.delete(this.schedule.id)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-schedule-detail"]],inputs:{schedule:"schedule",detailListener:"detailListener"},standalone:!0,features:[u],decls:57,vars:8,consts:[[1,"flex","w-screen","md:w-96","bg-background","h-full","overflow-auto","gap-2","px-3","flex-col","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted"],[1,"sticky","top-0","flex","flex-col","bg-background"],[1,"flex","relative","flex-row","items-center","gap-2","py-3","justify-start"],[1,"text-lg","text-foreground"],[1,"absolute","cursor-pointer","right-0","inline-flex","w-fit","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-fit",3,"click"],[1,"border-dashed","border-border"],[1,"flex","py-2","flex-col"],[1,"px-2","flex-col","flex"],[1,"text-xs","text-muted-foreground"],[1,"text-base","text-foreground"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),a(4),n(),s(5,"button",4),f("click",function(){return t.close()}),a(6," X "),n()(),y(7,"hr",5),n(),s(8,"div",6)(9,"div",7)(10,"span",8),a(11,"Tiempo de duracion"),n(),s(12,"span",9),a(13),n()()(),y(14,"hr",5),s(15,"div",6)(16,"div",7)(17,"span",8),a(18,"Cantidad de cupos"),n(),s(19,"span",9),a(20),n()()(),y(21,"hr",5),s(22,"div",6)(23,"div",7)(24,"span",8),a(25,"Hora inicial"),n(),s(26,"span",9),a(27),n()()(),y(28,"hr",5),s(29,"div",6)(30,"div",7)(31,"span",8),a(32,"Hora final"),n(),s(33,"span",9),a(34),n()()(),y(35,"hr",5),s(36,"div",6)(37,"div",7)(38,"span",8),a(39,"Doctor"),n(),s(40,"span",9),a(41),n()()(),y(42,"hr",5),s(43,"div",6)(44,"div",7)(45,"span",8),a(46,"Especialidad"),n(),s(47,"span",9),a(48),n()()(),y(49,"hr",5),s(50,"div",6)(51,"div",7)(52,"span",8),a(53,"Consultorio"),n(),s(54,"span",9),a(55),n()()(),y(56,"hr",5),n()),e&2&&(c(4),x("Horario: "+t.schedule.id),c(9),x(t.schedule.slotDuration),c(7),x(t.schedule.totalSlots),c(7),x(t.schedule.startTime),c(7),x(t.schedule.endTime),c(7),x(t.schedule.doctor==null||t.schedule.doctor.user==null?null:t.schedule.doctor.user.fullName),c(7),x(t.schedule.speciality==null?null:t.schedule.speciality.name),c(7),x(t.schedule.consultingRoom==null?null:t.schedule.consultingRoom.roomName))},dependencies:[p],encapsulation:2,changeDetection:0})}}return i})();var ce=(()=>{class i{constructor(){this.validators=[]}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-input-time"]],inputs:{formControl:"formControl",data:"data",validators:"validators"},standalone:!0,features:[u],decls:1,vars:1,consts:[["type","time",3,"formControl"]],template:function(e,t){e&1&&y(0,"input",0),e&2&&S("formControl",t.formControl)},dependencies:[p,U,G,P,pe,z],encapsulation:2,changeDetection:0})}}return i})();var Ee=(()=>{class i{constructor(){this.graphqlEndpoint=L.api_url}loadDoctorsSpecialtiesConsultingRooms(){return d(this,null,function*(){try{let e=new h().setRootType("query").openBlock("doctors").addField("id").openBlock("user").addField("id").addField("fullName").closeBlock().closeBlock().openBlock("specialities").addField("id").addField("name").closeBlock().openBlock("consultingRooms").addField("id").addField("roomName").closeBlock().close().build(),{errors:t,doctors:r,specialities:l,consultingRooms:g}=yield h.fetchQuery(e,this.graphqlEndpoint);return t?{isSuccess:!1,error:t[0].message}:{isSuccess:!0,value:{doctors:r,specialties:l,consultingRooms:g}}}catch(o){return{isSuccess:!1,error:o.message}}})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var De=(()=>{class i{constructor(){this.graphqlEndpoint=L.api_url}loadSchedules(o){return d(this,null,function*(){let t=new h().setRootType("query").addFieldWithArgs("doctorShedules",{params:o}).addField("id").addField("dayOfWeek").addField("startTime").addField("endTime").addField("slotDuration").addField("totalSlots").addField("status").openBlock("doctor").addField("id").addField("code").openBlock("user").addField("id").addField("fullName").closeBlock().closeBlock().openBlock("speciality").addField("id").addField("name").closeBlock().openBlock("consultingRoom").addField("id").addField("roomName").closeBlock().closeBlock().close().build(),{doctorShedules:r,errors:l}=yield h.fetchQuery(t,this.graphqlEndpoint);return l?{isSuccess:!1,error:l[0].message}:{isSuccess:!0,value:r}})}create(o,e){return d(this,null,function*(){let r=new h().setRootType("mutation").addFieldWithArgs("createDoctorShedule",{input:o}).addField("id").addField("dayOfWeek").addField("startTime").addField("endTime").addField("slotDuration").addField("totalSlots").close().closeBlock().build(),{createDoctorShedule:l,errors:g}=yield h.fetchQuery(r,this.graphqlEndpoint);return g?{isSuccess:!1,error:g[0].message}:{isSuccess:!0,value:l}})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function $e(i,k){}var Fe=(()=>{class i{constructor(){this.scheduleService=E(De),this.customQueriesService=E(Ee),this.cdr=E(O),this.dialogService=E(V),this.modalService=E(J),this.doctors=[],this.consultoringRooms=[],this.specialties=[],this.schedules=[],this.daysOfWeek=[{id:1,name:"Lunes"},{id:2,name:"Martes"},{id:3,name:"Miercoles"},{id:4,name:"Jueves"},{id:5,name:"Viernes"},{id:6,name:"Sabado"},{id:0,name:"Domingo"}],this.onShowItem=!1,this.detailListener={close:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},cancel:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},submit:o=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.showAlert({description:"Estas seguro de realizar la modificacion?"}).subscribe(e=>{let{id:t,code:r,fullName:l,user_id:g,email:w}=o.value,_={code:r,user:{id:g,fullName:l,email:w}}})},delete:o=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.showAlert({description:"Estas seguro de realizar la eliminacion?"}).subscribe(e=>{})}}}ngOnInit(){let o=new Date().getDay();this.loadItemsLists(),this.loadItems({dayOfWeek:o})}loadItemsLists(){return d(this,null,function*(){let o=new b;this.dialogService.showLoading({description:"Cargando",listener:o});let e=yield this.customQueriesService.loadDoctorsSpecialtiesConsultingRooms();if(o.next(0),!e.isSuccess){this.dialogService.showError({description:e.error});return}this.doctors=e.value.doctors.map(t=>({id:t.id,name:t.user.fullName})),this.consultoringRooms=e.value.consultingRooms.map(t=>({id:t.id,name:t.roomName})),this.specialties=e.value.specialties.map(t=>({id:t.id,name:t.name})),this.cdr.detectChanges()})}onItemSelected(o){let e=this.dcWrapper.viewContainerRef;e.clear();let t=e.createComponent(be);t.instance.detailListener=this.detailListener,t.instance.schedule=o,this.onShowItem=!0}onAddSchedule(){let o={component:M,data:{title:"Medico",description:"Se necesita especificar los detalles del medico"},dynamicFields:[{component:re,data:{title:"Medico",items:this.doctors.map(t=>({id:t.id,name:t.name})),id:"doctorId"},fieldFormControl:new v("")},{component:re,data:{title:"Consultorio",items:this.consultoringRooms.map(t=>({id:t.id,name:t.name})),id:"consultingRoomId"},fieldFormControl:new v("")},{component:re,data:{title:"Especialidad",items:this.specialties.map(t=>({id:t.id,name:t.name})),id:"specialityId"},fieldFormControl:new v("")}]},e={component:M,data:{title:"Horario",description:"Se necesita especificar los detalles de los horarios a agregar"},dynamicFields:[{component:re,data:{title:"Dia de la Semana",items:this.daysOfWeek.map(t=>({id:`${t.id}`,name:t.name})),id:"dayOfWeek"},fieldFormControl:new v("")},{component:ce,data:{placeholder:"Horarios",title:"Fecha Inicial",id:"startTime"},fieldFormControl:new v("")},{component:ce,data:{placeholder:"Horarios",title:"Fecha Final",id:"endTime"},fieldFormControl:new v("")},{component:R,data:{placeholder:"30",title:"Duraci\xF3n (min)",id:"slotDuration"},fieldFormControl:new v("")}]};this.modalService.open(K,{title:"Agregar Horario",size:"sm",forms:[o,e],data:{},icon:"assets/icons/heroicons/outline/plus.svg",actions:[{action:X.Create,title:"Agregar"}]}).subscribe(t=>{let{dayOfWeek:r,slotDuration:l,startTime:g,endTime:w,doctorId:_,specialityId:de,consultingRoomId:me}=Y(t);if(!r||!l||!g||!w||!_||!de||!me){this.dialogService.showError({description:"No se ha especificado la especialidad"});return}this.createSchedule({dayOfWeek:parseInt(r),slotDuration:parseInt(l),startTime:g,endTime:w,doctorId:parseInt(_),specialityId:parseInt(de),consultingRoomId:parseInt(me)})})}createSchedule(o){return d(this,null,function*(){let e=new b;this.dialogService.showLoading({description:"Cargando",listener:e});let t=yield this.scheduleService.create(o);if(e.next(0),!t.isSuccess){this.dialogService.showError({description:t.error});return}this.dialogService.ShowSuccess({description:"Horario agregado correctamente"}),this.cdr.detectChanges()})}loadItems(o){return d(this,null,function*(){let e=new b;this.dialogService.showLoading({description:"Cargando",listener:e});let t=yield this.scheduleService.loadSchedules(o);if(e.next(0),!t.isSuccess){this.dialogService.showError({description:t.error});return}this.schedules=t.value,this.cdr.detectChanges()})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-schedules"]],viewQuery:function(e,t){if(e&1&&j(I,5),e&2){let r;W(r=Q())&&(t.dcWrapper=r.first)}},standalone:!0,features:[u],decls:5,vars:3,consts:[[3,"classList"],[3,"onAddEvent"],[3,"onItemSelected","schedules"],["dcWrapper",""]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",0)(2,"app-schedules-header",1),f("onAddEvent",function(){return t.onAddSchedule()}),n(),s(3,"app-schedule-list-items",2),f("onItemSelected",function(l){return t.onItemSelected(l)}),n()(),F(4,$e,0,0,"ng-template",3),n()),e&2&&(S("classList",t.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),c(),S("classList",t.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"),c(2),S("schedules",t.schedules))},dependencies:[p,xe,we,I],encapsulation:2,changeDetection:0})}}return i})();var _e=(()=>{class i{constructor(){this.onAddEvent=new D}onAddToggle(){this.onAddEvent.emit()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-specialties-header"]],outputs:{onAddEvent:"onAddEvent"},standalone:!0,features:[u],decls:12,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-primary-foreground",3,"click"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Especialidades - Listado"),n(),s(4,"div",3)(5,"a",4),a(6,"Lista"),n(),s(7,"span"),a(8," - Especialidades"),n()()(),s(9,"div",5)(10,"button",6),f("click",function(){return t.onAddToggle()}),a(11," Agregar Especialidad "),n()()())},dependencies:[p],encapsulation:2,changeDetection:0})}}return i})();var ze=["specialty-item",""],Ie=(()=>{class i{ngOnInit(){}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["","specialty-item",""]],inputs:{specialty:"specialty"},standalone:!0,features:[u],attrs:ze,decls:8,vars:2,consts:[[1,"py-3","pl-3","text-start"],[1,"pr-1"],[1,"text-sm","text-muted-foreground"],[1,"py-3","pl-3","text-right"]],template:function(e,t){e&1&&(s(0,"td",0)(1,"div",1)(2,"span",2),a(3),n()()(),s(4,"td",3)(5,"div",1)(6,"span",2),a(7),n()()()),e&2&&(c(3),x(t.specialty.id),c(4),x(t.specialty.name))},dependencies:[p],encapsulation:2,changeDetection:0})}}return i})();function Ue(i,k){if(i&1){let o=N();s(0,"tr",10),f("click",function(){let t=A(o).$implicit,r=q();return B(r.onSelectTable(t))}),n()}if(i&2){let o=k.$implicit;S("specialty",o)}}var Re=(()=>{class i{constructor(){this.onItemSelected=new D}onSelectTable(o){this.onItemSelected.emit(o)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-specialty-list-items"]],inputs:{specialties:"specialties"},outputs:{onItemSelected:"onItemSelected"},standalone:!0,features:[u],decls:15,vars:1,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"mb-4","flex","items-center","justify-between"],[1,"flex-col","items-center"],[1,"text-xs","text-foreground"],[1,"relative","overflow-x-auto"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground"],[1,"py-3","text-left"],[1,"py-3","text-right"],["specialty-item","","class","border-b border-dashed border-border hover:bg-card",3,"specialty","click",4,"ngFor","ngForOf"],["specialty-item","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"click","specialty"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),a(4,"Lista de Especialidades"),n()()(),s(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th",7),a(10,"Codigo"),n(),s(11,"th",8),a(12,"Especialidad"),n()()(),s(13,"tbody"),F(14,Ue,1,1,"tr",9),n()()()()),e&2&&(c(14),S("ngForOf",t.specialties))},dependencies:[p,H,Ie],encapsulation:2,changeDetection:0})}}return i})();var ke=(()=>{class i{constructor(){this.specialtyForm=new $({name:new v,id:new v})}ngOnInit(){this.specialtyForm=new $({name:new v(this.specialty.name),id:new v(this.specialty.id)})}close(){this.detailListener.close()}onSubmit(){this.detailListener.submit(this.specialtyForm)}onDelete(){this.detailListener.delete(this.specialty.id)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-specialty-detail"]],inputs:{specialty:"specialty",detailListener:"detailListener"},standalone:!0,features:[u],decls:20,vars:2,consts:[[1,"flex","w-screen","md:w-96","bg-background","h-full","overflow-auto","gap-2","px-3","flex-col","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted",3,"ngSubmit","formGroup"],[1,"sticky","top-0","flex","flex-col","bg-background"],[1,"flex","relative","flex-row","items-center","gap-2","py-3","justify-start"],[1,"text-lg","text-foreground"],[1,"absolute","cursor-pointer","right-0","inline-flex","w-fit","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-fit",3,"click"],[1,"border-dashed","border-border"],[1,"flex","py-2","flex-col"],[1,"px-2","flex-col","flex"],[1,"text-xs","text-muted-foreground"],["type","text","formControlName","name","name","name","placeholder","google"],[1,"flex","py-2","flex-col","gap-2"],["type","submit",1,"bg-primary","text-white","rounded-md","p-2"],["type","button",1,"bg-red-500","text-white","rounded-md","p-2",3,"click"]],template:function(e,t){e&1&&(s(0,"form",0),f("ngSubmit",function(){return t.onSubmit()}),s(1,"div",1)(2,"div",2)(3,"span",3),a(4),n(),s(5,"button",4),f("click",function(){return t.close()}),a(6," X "),n()(),y(7,"hr",5),n(),s(8,"div",6)(9,"div",7)(10,"span",8),a(11,"Nombre"),n(),y(12,"input",9),n()(),y(13,"hr",5),s(14,"div",10)(15,"button",11),a(16," Guardar Cambios "),n(),y(17,"hr"),s(18,"button",12),f("click",function(){return t.onDelete()}),a(19," Eliminar "),n()()()),e&2&&(S("formGroup",t.specialtyForm),c(4),x("Especialidad :"+t.specialty.name))},dependencies:[p,U,ee,G,P,Z,te,oe,z],encapsulation:2,changeDetection:0})}}return i})();var Le=(()=>{class i{constructor(){this.graphqlEndpoint=L.api_url}getSpecialties(){return d(this,arguments,function*(o={}){try{let t=new h().setRootType("query").openBlock("specialities").addFieldsFromParams(o).closeBlock().close().build(),{specialities:r,errors:l}=yield h.fetchQuery(t,this.graphqlEndpoint);return l?{isSuccess:!1,error:l[0].message}:{isSuccess:!0,value:r}}catch(e){return{isSuccess:!1,error:e.message}}})}getspecialityById(t){return d(this,arguments,function*(o,e={}){try{let l=new h().addFieldWithArgs("speciality",{id:o}).openBlock("speciality").addFieldsFromParams(e).closeBlock().close().build(),{data:g,errors:w}=yield h.fetchQuery(l,this.graphqlEndpoint);return w?{isSuccess:!1,error:w[0].message}:{isSuccess:!0,value:g.speciality}}catch(r){return{isSuccess:!1,error:r.message}}})}createspeciality(o,e){return d(this,null,function*(){try{let r=new h().setRootType("mutation").addFieldWithArgs("createSpeciality",{input:o}).addFieldsFromParams(e??{}).closeBlock().close().build(),l=yield h.fetchQuery(r,this.graphqlEndpoint);return l.errors?{isSuccess:!1,error:l.errors[0].message}:{isSuccess:!0,value:l.createSpeciality}}catch(t){return{isSuccess:!1,error:t.message}}})}updatespeciality(o,e,t){return d(this,null,function*(){try{let l=new h().setRootType("mutation").addFieldWithArgs("updateSpeciality",{id:o,input:e}).addFieldsFromParams(t??{}).closeBlock().close().build();console.log(l),console.log(e);let g=yield h.fetchQuery(l,this.graphqlEndpoint);return g.errors?{isSuccess:!1,error:g.errors[0].message}:{isSuccess:!0,value:g.updateSpeciality}}catch(r){return{isSuccess:!1,error:r.message}}})}deletespeciality(o){return d(this,null,function*(){try{let t=new h().setRootType("mutation").addDeleteMutation("deleteSpeciality",{id:o}).build(),r=yield h.fetchQuery(t,this.graphqlEndpoint);return r.errors?{isSuccess:!1,error:r.errors[0].message}:{isSuccess:!0,value:r.deleteSpeciality}}catch(e){return{isSuccess:!1,error:e.message}}})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Xe(i,k){}var Te=(()=>{class i{constructor(){this.listParams=["id","name"],this.cdr=E(O),this.detailListener={close:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},cancel:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},submit:o=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.showAlert({description:"Estas seguro de realizar la modificacion?"}).subscribe(e=>{let{id:t,name:r}=o.value;this.updateSpecialty(t,{id:t,name:r})})},delete:o=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.showAlert({description:"Estas seguro de realizar la eliminacion?"}).subscribe(e=>{this.removeSpecialty(`${o}`)})}},this.specialties=[],this.onShowItem=!1,this.modalService=E(J),this.dialogService=E(V),this.specialtyService=E(Le)}ngOnInit(){this.loadSpecialties(this.listParams.reduce((o,e)=>(o[e]=!0,o),{}))}ngAfterViewInit(){}onItemSelected(o){let e=this.dcWrapper.viewContainerRef;e.clear();let t=e.createComponent(ke);t.instance.specialty=o,t.instance.detailListener=this.detailListener,this.onShowItem=!0}onAddSpecialty(){let o={component:M,data:{title:"Detalles de la nueva especialidad a agregar",description:"Se necesita especificar los detalles de la especialidad a agregar"},dynamicFields:[{component:R,data:{placeholder:"Cirugia General",title:"Especialidad",id:"specialty"},fieldFormControl:new v("")}]};this.modalService.open(K,{title:"Agregar Especialidad",size:"sm",forms:[o],data:{},icon:"assets/icons/heroicons/outline/plus.svg",actions:[{action:X.Create,title:"Agregar"}]}).subscribe({next:e=>{let{specialty:t}=Y(e);if(!t){this.dialogService.showError({description:"No se ha especificado la especialidad"});return}this.addSpecialty(t)},error:e=>{this.dialogService.showError({description:"Error al agregar la especialidad"})},complete:()=>{}})}loadSpecialties(o){return d(this,null,function*(){let e=new b;this.dialogService.showLoading({description:"Cargando",listener:e});let t=yield this.specialtyService.getSpecialties(o);if(e.next(0),!t.isSuccess){this.error=t.error,this.dialogService.showError({description:t.error});return}this.specialties=t.value,this.cdr.detectChanges()})}loadSpecialty(o,e){return d(this,null,function*(){let t=new b;this.dialogService.showLoading({description:"Cargando",listener:t});let r=yield this.specialtyService.getspecialityById(o,e);if(t.next(0),!r.isSuccess){this.error=r.error,this.dialogService.showError({description:r.error});return}this.specialties=r.value,this.dialogService.ShowSuccess({description:"Especialidad cargada con \xE9xito"}),this.cdr.detectChanges()})}addSpecialty(o){return d(this,null,function*(){let e=new b;this.dialogService.showLoading({description:"Cargando",listener:e});let t=yield this.specialtyService.createspeciality({name:o},this.listParams.reduce((r,l)=>(r[l]=!0,r),{}));if(e.next(0),!t.isSuccess){this.error=t.error,this.dialogService.showError({description:t.error});return}this.specialties=[...this.specialties,t.value],this.dialogService.ShowSuccess({description:"Especialidad agregada con \xE9xito "}),this.cdr.detectChanges()})}updateSpecialty(o,e){return d(this,null,function*(){let t=new b;this.dialogService.showLoading({description:"Cargando",listener:t});let r=yield this.specialtyService.updatespeciality(o,e,this.listParams.reduce((l,g)=>(l[g]=!0,l),{}));if(t.next(0),!r.isSuccess){this.error=r.error,this.dialogService.showError({description:r.error});return}this.specialties=this.specialties.map(l=>`${l.id}`===o?r.value:l),this.dialogService.ShowSuccess({description:"Especialidad actualizada con \xE9xito"}),this.cdr.detectChanges()})}removeSpecialty(o){return d(this,null,function*(){let e=new b;this.dialogService.showLoading({description:"Cargando",listener:e});let t=yield this.specialtyService.deletespeciality(o);e.next(0),t.isSuccess||(this.error=t.error,this.dialogService.showError({description:t.error})),this.specialties=this.specialties.filter(r=>`${r.id}`!==o),this.dialogService.ShowSuccess({description:"Especialidad eliminada con \xE9xito"}),this.cdr.detectChanges()})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-specialties"]],viewQuery:function(e,t){if(e&1&&j(I,5),e&2){let r;W(r=Q())&&(t.dcWrapper=r.first)}},standalone:!0,features:[u],decls:5,vars:3,consts:[[3,"classList"],[3,"onAddEvent"],[3,"onItemSelected","specialties"],["dcWrapper",""]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",0)(2,"app-specialties-header",1),f("onAddEvent",function(){return t.onAddSpecialty()}),n(),s(3,"app-specialty-list-items",2),f("onItemSelected",function(l){return t.onItemSelected(l)}),n()(),F(4,Xe,0,0,"ng-template",3),n()),e&2&&(S("classList",t.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),c(),S("classList",t.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"),c(2),S("specialties",t.specialties))},dependencies:[p,_e,Re,I],encapsulation:2})}}return i})();var Me=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-doctor"]],standalone:!0,features:[u],decls:1,vars:0,template:function(e,t){e&1&&y(0,"router-outlet")},dependencies:[p,ie,ue],encapsulation:2,changeDetection:0})}}return i})();var Ae=(()=>{class i{constructor(){this.consultingRoomForm=new $({id:new v,roomLocation:new v,roomName:new v})}ngOnInit(){this.consultingRoomForm=new $({roomLocation:new v(this.consultingRoom.roomLocation),roomName:new v(this.consultingRoom.roomName),id:new v(this.consultingRoom.id)})}close(){this.detailListener.close()}onSubmit(){this.detailListener.submit(this.consultingRoomForm)}onDelete(){this.detailListener.delete(this.consultingRoom.id)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-consulting-room-detail"]],inputs:{consultingRoom:"consultingRoom",detailListener:"detailListener"},standalone:!0,features:[u],decls:26,vars:2,consts:[[1,"flex","w-screen","md:w-96","bg-background","h-full","overflow-auto","gap-2","px-3","flex-col","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted",3,"ngSubmit","formGroup"],[1,"sticky","top-0","flex","flex-col","bg-background"],[1,"flex","relative","flex-row","items-center","gap-2","py-3","justify-start"],[1,"text-lg","text-foreground"],[1,"absolute","cursor-pointer","right-0","inline-flex","w-fit","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-fit",3,"click"],[1,"border-dashed","border-border"],[1,"flex","py-2","flex-col"],[1,"px-2","flex-col","flex"],[1,"text-xs","text-muted-foreground"],["type","text","formControlName","roomName","name","roomName","placeholder","google"],["type","text","formControlName","roomLocation","name","roomLocation","placeholder","google"],[1,"flex","py-2","flex-col","gap-2"],["type","submit",1,"bg-primary","text-white","rounded-md","p-2"],["type","button",1,"bg-red-500","text-white","rounded-md","p-2",3,"click"]],template:function(e,t){e&1&&(s(0,"form",0),f("ngSubmit",function(){return t.onSubmit()}),s(1,"div",1)(2,"div",2)(3,"span",3),a(4),n(),s(5,"button",4),f("click",function(){return t.close()}),a(6," X "),n()(),y(7,"hr",5),n(),s(8,"div",6)(9,"div",7)(10,"span",8),a(11,"Nombre"),n(),y(12,"input",9),n()(),y(13,"hr",5),s(14,"div",6)(15,"div",7)(16,"span",8),a(17,"Ubicacion"),n(),y(18,"input",10),n()(),y(19,"hr",5),s(20,"div",11)(21,"button",12),a(22," Guardar Cambios "),n(),y(23,"hr"),s(24,"button",13),f("click",function(){return t.onDelete()}),a(25," Eliminar "),n()()()),e&2&&(S("formGroup",t.consultingRoomForm),c(4),x("Especialidad :"+t.consultingRoom.roomName))},dependencies:[p,z,ee,G,P,Z,U,te,oe],encapsulation:2,changeDetection:0})}}return i})();var Be=(()=>{class i{constructor(){this.onAddEvent=new D}onAddToggle(){this.onAddEvent.emit()}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-consulting-room-header"]],outputs:{onAddEvent:"onAddEvent"},standalone:!0,features:[u],decls:12,vars:0,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-primary-foreground",3,"click"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Consultorios - Listado"),n(),s(4,"div",3)(5,"a",4),a(6,"Lista"),n(),s(7,"span"),a(8," - Consultorios"),n()()(),s(9,"div",5)(10,"button",6),f("click",function(){return t.onAddToggle()}),a(11," Agregar consultorio "),n()()())},dependencies:[p],encapsulation:2,changeDetection:0})}}return i})();var Ne=(()=>{class i{constructor(){this.graphqlEndpoint=L.api_url}getAll(){return d(this,arguments,function*(o={}){try{let t=new h().setRootType("query").openBlock("consultingRooms").addFieldsFromParams(o).closeBlock().close().build(),{consultingRooms:r,errors:l}=yield h.fetchQuery(t,this.graphqlEndpoint);return l?{isSuccess:!1,error:l[0].message}:{isSuccess:!0,value:r}}catch(e){return{isSuccess:!1,error:e.message}}})}getById(t){return d(this,arguments,function*(o,e={}){try{let l=new h().addFieldWithArgs("consultingRoom",{id:o}).openBlock("consultingRoom").addFieldsFromParams(e).closeBlock().close().build(),{consultingRoom:g,errors:w}=yield h.fetchQuery(l,this.graphqlEndpoint);return w?{isSuccess:!1,error:w[0].message}:{isSuccess:!0,value:g}}catch(r){return{isSuccess:!1,error:r.message}}})}create(o,e){return d(this,null,function*(){try{let r=new h().setRootType("mutation").addFieldWithArgs("createConsultingRoom",{input:o}).addFieldsFromParams(e??{}).closeBlock().close().build(),l=yield h.fetchQuery(r,this.graphqlEndpoint);return l.errors?{isSuccess:!1,error:l.errors[0].message}:{isSuccess:!0,value:l.createConsultingRoom}}catch(t){return{isSuccess:!1,error:t.message}}})}update(o,e,t){return d(this,null,function*(){try{let l=new h().setRootType("mutation").addFieldWithArgs("updateConsultingRoom",{id:o,input:e}).addFieldsFromParams(t??{}).closeBlock().close().build(),g=yield h.fetchQuery(l,this.graphqlEndpoint);return g.errors?{isSuccess:!1,error:g.errors[0].message}:{isSuccess:!0,value:g.updateConsultingRoom}}catch(r){return{isSuccess:!1,error:r.message}}})}delete(o){return d(this,null,function*(){try{let t=new h().setRootType("mutation").addDeleteMutation("deleteConsultingRoom",{id:o}).build(),r=yield h.fetchQuery(t,this.graphqlEndpoint);return r.errors?{isSuccess:!1,error:r.errors[0].message}:{isSuccess:!0,value:r.deleteConsultingRoom}}catch(e){return{isSuccess:!1,error:e.message}}})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Je=["consulting-room-item",""],qe=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["","consulting-room-item",""]],inputs:{consultingRoom:"consultingRoom"},standalone:!0,features:[u],attrs:Je,decls:12,vars:3,consts:[[1,"py-3","pl-3","text-start"],[1,"pr-1"],[1,"text-sm","text-muted-foreground"],[1,"py-3","pl-3","text-right"]],template:function(e,t){e&1&&(s(0,"td",0)(1,"div",1)(2,"span",2),a(3),n()()(),s(4,"td",0)(5,"div",1)(6,"span",2),a(7),n()()(),s(8,"td",3)(9,"div",1)(10,"span",2),a(11),n()()()),e&2&&(c(3),x(t.consultingRoom.id),c(4),x(t.consultingRoom.roomName),c(4),x(t.consultingRoom.roomLocation))},dependencies:[p],encapsulation:2,changeDetection:0})}}return i})();function Ke(i,k){if(i&1){let o=N();s(0,"tr",10),f("click",function(){let t=A(o).$implicit,r=q();return B(r.onSelectTable(t))}),n()}if(i&2){let o=k.$implicit;S("consultingRoom",o)}}var je=(()=>{class i{constructor(){this.onSelectItem=new D}onSelectTable(o){this.onSelectItem.emit(o)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-consulting-room-items"]],inputs:{consultingRooms:"consultingRooms"},outputs:{onSelectItem:"onSelectItem"},standalone:!0,features:[u],decls:17,vars:1,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"mb-4","flex","items-center","justify-between"],[1,"flex-col","items-center"],[1,"text-xs","text-foreground"],[1,"relative","overflow-x-auto"],[1,"w-full","table-auto"],[1,"text-xs","uppercase","text-muted-foreground"],[1,"py-3","text-left"],[1,"py-3","text-right"],["consulting-room-item","","class","border-b border-dashed border-border hover:bg-card",3,"consultingRoom","click",4,"ngFor","ngForOf"],["consulting-room-item","",1,"border-b","border-dashed","border-border","hover:bg-card",3,"click","consultingRoom"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),a(4,"Lista de Consultorios"),n()()(),s(5,"div",4)(6,"table",5)(7,"thead",6)(8,"tr")(9,"th",7),a(10,"Id"),n(),s(11,"th",7),a(12,"Nombre"),n(),s(13,"th",8),a(14,"Ubicacion"),n()()(),s(15,"tbody"),F(16,Ke,1,1,"tr",9),n()()()()),e&2&&(c(16),S("ngForOf",t.consultingRooms))},dependencies:[p,H,qe],encapsulation:2,changeDetection:0})}}return i})();function Ye(i,k){}var We=(()=>{class i{constructor(){this.listParams=["id","roomName","roomLocation"],this.onShowItem=!1,this.modalService=E(J),this.dialogService=E(V),this.consultingRoomService=E(Ne),this.cdr=E(O),this.consultingRooms=[],this.detailListener={close:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},cancel:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1},submit:o=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.showAlert({description:"Estas seguro de realizar la modificacion?"}).subscribe(e=>{let{id:t,roomLocation:r,roomName:l}=o.value;this.updateConsultingRoom(t,{id:t,roomLocation:r,roomName:l})})},delete:o=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.dialogService.showAlert({description:"Estas seguro de realizar la eliminacion?"}).subscribe(e=>{this.removeConsultingRoom(`${o}`)})}}}ngOnInit(){this.loadConsultingRooms(this.listParams.reduce((o,e)=>(o[e]=!0,o),{}))}ngAfterViewInit(){}onItemSelected(o){let e=this.dcWrapper.viewContainerRef;e.clear();let t=e.createComponent(Ae);t.instance.consultingRoom=o,t.instance.detailListener=this.detailListener,this.onShowItem=!0}onAddConsultingRoom(){let o={component:M,data:{title:"Consultorios",description:"Espeficicaciones necesarias del consultorio a agregar"},dynamicFields:[{component:R,data:{title:"Nombre de la Sala",placeholder:"Sala 1",id:"roomName"},fieldFormControl:new v("")},{component:R,data:{title:"Ubicacion",placeholder:"Piso 1 - Sala 1",id:"roomLocation"},fieldFormControl:new v("")}]};this.modalService.open(K,{title:"Agregar Consultorio",size:"sm",forms:[o],data:{},icon:"assets/icons/heroicons/outline/plus.svg",actions:[{action:X.Create,title:"Agregar"}]}).subscribe(e=>{let{roomName:t,roomLocation:r}=Y(e);if(!t||!r){this.dialogService.showError({description:"No se ha especificado la especialidad"});return}this.addConsultingRoom({roomName:t,roomLocation:r})})}loadConsultingRooms(o){return d(this,null,function*(){let e=new b;this.dialogService.showLoading({description:"Cargando",listener:e});let t=yield this.consultingRoomService.getAll(o);if(e.next(0),!t.isSuccess){this.error=t.error,this.dialogService.showError({description:t.error});return}this.consultingRooms=t.value,this.cdr.detectChanges()})}loadConsultingRoom(o,e){return d(this,null,function*(){let t=new b;this.dialogService.showLoading({description:"Cargando",listener:t});let r=yield this.consultingRoomService.getById(o,e);if(t.next(0),!r.isSuccess){this.error=r.error,this.dialogService.showError({description:r.error});return}this.consultingRooms=r.value,this.dialogService.ShowSuccess({description:"Consultorio cargada con \xE9xito"}),this.cdr.detectChanges()})}addConsultingRoom(o){return d(this,null,function*(){let e=new b;this.dialogService.showLoading({description:"Cargando",listener:e});let t=yield this.consultingRoomService.create(o,this.listParams.reduce((r,l)=>(r[l]=!0,r),{}));if(e.next(0),!t.isSuccess){this.error=t.error,this.dialogService.showError({description:t.error});return}this.consultingRooms=[...this.consultingRooms,t.value],this.dialogService.ShowSuccess({description:"Consultorio agregado con \xE9xito "}),this.cdr.detectChanges()})}updateConsultingRoom(o,e){return d(this,null,function*(){let t=new b;this.dialogService.showLoading({description:"Cargando",listener:t});let r=yield this.consultingRoomService.update(o,e,this.listParams.reduce((l,g)=>(l[g]=!0,l),{}));if(t.next(0),!r.isSuccess){this.error=r.error,this.dialogService.showError({description:r.error});return}this.consultingRooms=this.consultingRooms.map(l=>`${l.id}`===o?r.value:l),this.dialogService.ShowSuccess({description:"Consultorio actualizado con \xE9xito"}),this.cdr.detectChanges()})}removeConsultingRoom(o){return d(this,null,function*(){let e=new b;this.dialogService.showLoading({description:"Cargando",listener:e});let t=yield this.consultingRoomService.delete(o);e.next(0),t.isSuccess||(this.error=t.error,this.dialogService.showError({description:t.error})),this.consultingRooms=this.consultingRooms.filter(r=>`${r.id}`!==o),this.dialogService.ShowSuccess({description:"Consultorio eliminado con \xE9xito"}),this.cdr.detectChanges()})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-consulting-room"]],viewQuery:function(e,t){if(e&1&&j(I,5),e&2){let r;W(r=Q())&&(t.dcWrapper=r.first)}},standalone:!0,features:[u],decls:5,vars:3,consts:[[3,"classList"],[3,"onAddEvent"],[3,"onSelectItem","consultingRooms"],["dcWrapper",""]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",0)(2,"app-consulting-room-header",1),f("onAddEvent",function(){return t.onAddConsultingRoom()}),n(),s(3,"app-consulting-room-items",2),f("onSelectItem",function(l){return t.onItemSelected(l)}),n()(),F(4,Ye,0,0,"ng-template",3),n()),e&2&&(S("classList",t.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),c(),S("classList",t.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"),c(2),S("consultingRooms",t.consultingRooms))},dependencies:[p,I,Be,je],encapsulation:2,changeDetection:0})}}return i})();var Ze=[{path:"",component:Me,children:[{path:"list",component:ye},{path:"schedules",component:Fe},{path:"specialties",component:Te},{path:"consulting-room",component:We},{path:"",redirectTo:"list",pathMatch:"full"},{path:"**",redirectTo:"error/404"}]}],Qe=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=se({type:i})}static{this.\u0275inj=ne({imports:[ie.forChild(Ze),ie]})}}return i})();var Nr=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=se({type:i})}static{this.\u0275inj=ne({imports:[Qe]})}}return i})();export{Nr as DoctorModule};
